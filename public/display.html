<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Display View</title>


  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="display-view">
     <p id="label"></p>
    <h1 id="timer"></h1>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.js"></script>

  <script>
    const socket = io('http://localhost:3000');
    const timerElement = document.getElementById('timer');
    const labelElement = document.getElementById('label');
    let timerInterval; // Declare the interval variable globally
  
    socket.on('update', (data) => {
      updateDisplay(data);
    });
  
    function updateDisplay(data) {
      let timeRemaining = data.timeRemaining;
  
      function updateTimer() {
        const isNegative = timeRemaining < 0;
  
        const absoluteTime = isNegative ? Math.abs(timeRemaining) : timeRemaining;
  
        const hours = Math.floor(absoluteTime / 3600);
        const minutes = Math.floor((absoluteTime % 3600) / 60);
        const seconds = absoluteTime % 60;
  
        const formattedHours = isNegative ? `-${hours < 10 ? '0' : ''}${hours}` : `${hours < 10 ? '0' : ''}${hours}`;
        const formattedMinutes = `${minutes < 10 ? '0' : ''}${minutes}`;
        const formattedSeconds = `${seconds < 10 ? '0' : ''}${seconds}`;
  
        const displayTime = `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;
  
        timerElement.textContent = displayTime;
        timeRemaining--;
  
        // You can customize this part based on your requirements
        if (isNegative && timeRemaining < -600) {
          clearInterval(timerInterval);
          timerElement.textContent = '00:00:00';
        }
      }
  
      // Initial update
      updateTimer();
  
      // Set up interval to update timer every second
      clearInterval(timerInterval); // Clear existing interval before setting up a new one
      timerInterval = setInterval(updateTimer, 1000);
  
      // Update label
      labelElement.textContent = data.labelText;
    }
  </script>
  
  
</body>
</html>
